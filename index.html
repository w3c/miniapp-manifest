<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>MiniApp Manifest</title>
    <link rel="stylesheet" href="./local.css" />

    <style>
    .two-cols {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    table.members {
      border: 1px #f0f0f0 solid;
      margin-bottom: 1em;
      width: 100%;
    }
    table.members th:nth-child(1),
    table.members td:nth-child(1) {
      width: 11rem;  
    }

    table.members th:nth-child(2),
    table.members td:nth-child(2) {
      width: 5rem;  
    }
    table.members thead tr,
    table.members tr:nth-child(even) {
      background-color: #f0f0f0;
    }
    td, th {
      padding:2px 15px;
    }
    </style>

    <script async class="remove" src="https://www.w3.org/Tools/respec/respec-w3c"></script>
    <script defer src="https://w3c.github.io/miniapp/specs/script.js"></script>

    <script class="remove">
        var respecConfig = {
            specStatus: "ED",
            copyrightStart: "2021",
            edDraftURI: "https://w3c.github.io/miniapp-manifest/",

            shortName: "miniapp-manifest",

            editors: [{
                name: "Martin Alvarez-Espinar",
                companyURL: "https://www.huawei.com/",
                company: "Huawei",
                w3cid: 125049,
              }, {
               name: "Yongjing Zhang",
                companyURL: "https://www.huawei.com/",
                company: "Huawei",
                w3cid: 75048,
              }],

             formerEditors: [{
                name: "Shouren Lan",
                companyURL: "https://www.huawei.com/",
                company: "Huawei",
                w3cid: 119736,
              }, {
                name: "Zhiqiang Yu",
                companyURL: "https://www.huawei.com/",
                company: "Huawei",
                w3cid: 102877,
              }, {
                name: "Xiaofeng Zhang",
                companyURL: "https://www.huawei.com/",
                company: "Huawei",
                w3cid: 111840,
              }],

            group: "wg/miniapps",
            github: {
              repoURL: "https://github.com/w3c/miniapp-manifest",
              branch: "main",
            },
            localBiblio:  {
              "SEMANTIC-VERSIONING": {
                title: 'Semantic Versioning',
                href: 'https://semver.org/'
              },
              "MINIAPP-LIFECYCLE": {
                  title: "MiniApp Lifecycle",
                  href: "https://w3c.github.io/miniapp-lifecycle/"
              },
              "MINIAPP-PACKAGING": {
                  title: "MiniApp Packaging",
                  href: "https://w3c.github.io/miniapp-packaging/"
              },
            },
            a11y: true,            
        };
    </script>
</head>

<body data-cite="APPMANIFEST MINIAPP-PACKAGING MANIFEST-APP-INFO INFRA URL HTML">
  <section id='abstract'>
    <p>
      This specification is a registry of supplementary members for the <a href="https://www.w3.org/TR/appmanifest/">Web Application Manifest</a> and the <a href="https://www.w3.org/TR/manifest-app-info/">Web App Manifest - Application Information</a> specifications that provide additional metadata to an application manifest to describe <a href="https://w3c.github.io/miniapp-packaging/#dfn-miniapp" data-link-type="dfn">MiniApps</a>. This JSON-based manifest file enables developers to set up basic information, window style, page route, and other information of a MiniApp. The manifest also includes information about the window style like the navigation bar, title, window background color, page routing information, and the widgets that are part of a MiniApp.
    </p>
  </section>

  <section id='sotd'>
    <!--p id="langSwitch">
      <button onclick="switchLang('zh-hans')" lang="zh-hans">简体中文</button>
      <button onclick="switchLang('en')" lang="en">English</button>
      <button onclick="switchLang('all')" lang="en">All</button>
    </p-->
  </section>
  <section>
    <h2>MiniApp Manifest</h2>
    <p>
      A <dfn data-export="" data-lt="MiniApp manifest's|manifest|MiniApp manifests">MiniApp manifest</dfn> is a [[JSON]] document that extends and profiles the Web App Manifest [[APPMANIFEST]] and the Web App Manifest - Application Information [[MANIFEST-APP-INFO]], to describe metadata associated with a MiniApp.
    </p>
    <section id="manifest-conformance" data-cite="IMAGE-RESOURCE">
      <h3>Conformance</h3>
      <p>
        A [=MiniApp manifest=] MUST contain the following members at its root:
      </p>
      <ul>
        <li>
          <a><code>app_id</code></a>
        </li>
        <li>
          <a><code>icons</code></a>
        </li>
        <li>
          <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a>
        </li>
        <li>
          <a><code>version_name</code></a>
        </li>  
        <li>
          <a><code>version_code</code></a>
        </li>
        <li>
          <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>min_platform_version</code></a>
        </li>
        <li>
          <a><code>pages</code></a>
        </li>
      </ul>
      <p>
          Each [=image resource=] object within the [=MiniApp manifest's=] <a><code>icons</code></a> member MUST contain:
      </p>
      <ul>
        <li>
          <a href="https://www.w3.org/TR/image-resource/#dfn-src" data-type="dfn" data-link-type="dfn"><code>src</code></a>
        </li>
      </ul>
      <p>
        A [=MiniApp manifest=] MAY contain a <a><code>widgets</code></a> member at its root. This member MUST contain an [=array=] of <a>MiniApp widget resources</a>. Each [=MiniApp widget resource=] object MUST contain the following members:
      </p>
      <ul>
        <li>
         <a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>name</code></a>
        </li>
        <li>
         <a><code>path</code></a>
        </li>
      </ul>
      <p>
        A [=MiniApp manifest=] MAY contain a <a><code>req_permissions</code></a> member at its root. This member MUST contain an [=array=] of <a>MiniApp permission resources</a>. Each [=MiniApp permission resource=] object MUST contain the following member:
      </p>
      <ul>
        <li>
         <a data-link-for="MiniApp permission resource" data-link-type="dfn"><code>name</code></a>
        </li>
      </ul>
      <p>The presence of other members in a [=MiniApp manifest=] is optional, but vendor-specific extensions MAY modify this.</p>
      <p>
        As the [=application manifest=] is JSON, this specification relies on the [[JSON]] specification. This specification includes members typed as <dfn>number</dfn>, <dfn>boolean</dfn> literals, <dfn>object</dfn>,
        <dfn>array</dfn>, and <dfn>string</dfn>.
      </p>      
    </section>

    <section data-cite="IMAGE-RESOURCE">
      <h3>Summary of Members</h3>
      <p>
        The following table shows a summary of the [=MiniApp manifest's=] members:
      </p>
      <table class="members">
        <caption>Members at root</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a><code>app_id</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Identifier</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>description</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Description</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>dir</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Direction of texts</span>
            </td>
          </tr>
          <tr data-cite="IMAGE-RESOURCE">
            <th scope="row"><a><code>icons</code></a></th>
            <td> [=image resource=] [=array=] </td>
            <td>Yes</td>
            <td>
              <span>MiniApp icons</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>lang</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Primary language</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a data-link-for="MiniApp manifest" data-link-type="dfn"><code>min_platform_version</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Minimum platform version supported</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>App name</span>
            </td>
          </tr>          
          <tr>
            <th scope="row"><a><code>pages</code></a></th>
            <td> [=array=] </td>
            <td>Yes</td>
            <td>
              <span>Page routing information</span>
            </td>
          </tr>
          <tr>
              <th scope="row"><a><code>req_permissions</code></a></th>              
              <td> <a>permission resource</a> [=array=] </td>
              <td>No</td>
              <td> <span>Required permissions</span></td>
          </tr>          
          <tr>
            <th scope="row"><a><code>short_name</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>MiniApp short name</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>version_code</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Version code</span>
            </td>
          </tr>          
          <tr>
            <th scope="row"><a><code>version_name</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Version name</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>widgets</code></a></th>
            <td> <a>widget resource</a> [=array=] </td>
            <td>No</td>
            <td> <span>Widgets</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>window</code></a></th>
            <td> <a>window resource</a> </td>
            <td>No</td>
            <td>
              <span>Window style</span>
            </td>
          </tr>
        </tbody>
      </table>

      <table class="members">
        <caption>Members of [=image resource=] objects<br/>(<a><code>icons</code></a> array)</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a href="https://www.w3.org/TR/image-resource/#dfn-label" data-link-type="dfn"><code>label</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Accessible text</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a href="https://www.w3.org/TR/image-resource/#dfn-sizes" data-type="dfn" data-link-type="dfn"><code>sizes</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Resolution sizes of the icon</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a href="https://www.w3.org/TR/image-resource/#dfn-src" data-type="dfn" data-link-type="dfn"><code>src</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Source of the icon</span>
            </td>
          </tr>
        </tbody>
      </table>

      <table class="members">
        <caption>Members of [=permission resource=] objects<br/>(<a><code>req_permissions</code></a> array)</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a data-link-for="MiniApp permission resource" data-link-type="dfn"><code>name</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
                <span>Permission name</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>reason</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
                <span>Reason to request the permission</span>
            </td>
          </tr>          
        </tbody>
      </table>

      <table class="members">
        <caption>Members of [=widget resource=] objects<br/>(<a><code>widgets</code></a> array)</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>name</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Widget name</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>path</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Widget path</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>min_platform_version</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Minimum platform version supported</span>
            </td>
          </tr>
        </tbody>
      </table>

      <table class="members">
        <caption>Members of [=window resource=] objects<br/>(<a><code>window</code></a> object)</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a><code>auto_design_width</code></a></th>
            <td> [=boolean=]  </td>
            <td>No</td>
            <td>
                <span>Enables/disables auto-calculation of page's <a><code>design_width</code></a> </span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a data-link-for="MiniApp window resource" data-link-type="dfn"><code>background_color</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Window background color</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>background_text_style</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Background text style</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>design_width</code></a></th>
            <td> [=number=]  </td>
            <td>No</td>
            <td>
                <span>The baseline page design width</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>enable_pull_down_refresh</code></a></th>
            <td> [=boolean=] </td>
            <td>No</td>
            <td>
              <span>Enable pull-to-refresh event</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>fullscreen</code></a></th>
            <td> [=boolean=]  </td>
            <td>No</td>
            <td>
              <span>Full screen display</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>navigation_bar_background_color</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Navigation bar background color</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>navigation_bar_text_style</code></a></th>
            <td> [=string=]  </td>
            <td>No</td>
            <td>
              <span>Text style of the navigation bar</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>navigation_bar_title_text</code></a></th>
            <td> [=string=]  </td>
            <td>No</td>
            <td>
              <span>Navigation bar title</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>navigation_style</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Navigation bar style</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>on_reach_bottom_distance</code></a></th>
            <td> [=number=] </td>
            <td>No</td>
            <td>
              <span>Distance for pull-up bottom event triggering</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>orientation</code></a></th>
            <td> [=string=]  </td>
            <td>No</td>
            <td>
              <span>Screen orientation settings</span>
            </td>
          </tr>
        </tbody>
      </table>

      <p class="note">
      Other [=application manifest=] members such as <a href="https://www.w3.org/TR/appmanifest/#scope-member"><code>scope</code></a>,
        <a href="https://www.w3.org/TR/appmanifest/#theme_color-member"><code>theme_color</code></a>,
        <a href="https://www.w3.org/TR/appmanifest/#related_applications-member"><code>related_applications</code></a>,
        <a href="https://www.w3.org/TR/appmanifest/#prefer_related_applications-member"><code>prefer_related_applications</code></a>, and
        <a href="https://www.w3.org/TR/appmanifest/#shortcuts-member"><code>shortcuts</code></a> are not currently supported by MiniApp user agents.
      </p>
    </section>

    <section class='informative' id="sec-example">
      <h2>Example</h2>
      <p>
        The following code represents a [=MiniApp manifest=] example:   
      </p>

      <pre class="example json" title="Manifest document">
        {
          "dir": "ltr",
          "lang": "en-US",
          "app_id": "org.example.miniapp",
          "name": "MiniApp Demo",
          "short_name": "MiniApp",
          "version_name": "1.0.1",
          "version_code": 11,
          "description": "A Simple MiniApp Demo",
          "icons": [
            {
              "src": "common/icons/icon.png",
              "sizes": "48x48"
            }
          ],
          "min_platform_version": "1.0.0",
          "pages": [
            "pages/index/index",
            "pages/detail/detail"
          ],
          "window": {
            "navigation_bar_text_style": "black",
            "navigation_bar_title_text": "My MiniApp",
            "navigation_bar_background_color": "#f8f8f8",
            "background_color": "#ffffff",
            "fullscreen": false
          },
          "widgets": [
            {
              "name": "widget",
              "path": "widgets/index/index",
              "min_platform_version": "2.0.0"
            }
          ],
          "req_permissions": [
            {
              "name": "system.permission.LOCATION",
              "reason": "To show user's position on the map"
            },
            {
              "name": "system.permission.CAMERA",
              "reason": "To scan a QR code"
            }
          ]
        }
      </pre>
    </section>

    <section id='webappmanifest-members'>
      <h2>Web Application Manifest members</h2>
      <p>The [=MiniApp manifest=] uses the following essential [=application manifest=]'s members.</p>      
      <section>
        <h3><code>dir</code> member</h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>dir</code></dfn> member, while specifying the base direction of the <a>localizable members</a> of the [=manifest=], also specifies
          the default base text direction of the whole MiniApp.</p> 
        <p>The <a><code>dir</code></a> member's value can be set to one of the <a href="https://www.w3.org/TR/appmanifest/#dfn-text-direction-value">text-direction values</a> as specified in [[APPMANIFEST]]. The text-direction values are the following:</p>
        <dl>
          <dt><a href="https://w3c.github.io/miniapp-packaging/#dfn-ltr" data-type="dfn" data-link-type="dfn"><code>"ltr"</code></a></dt>
          <dd>Left-to-right text.</dd>
          <dt><a href="https://w3c.github.io/miniapp-packaging/#dfn-rtl" data-type="dfn" data-link-type="dfn"><code>"rtl"</code></a></dt>
          <dd>Right-to-left text.</dd>
          <dt><a href="https://w3c.github.io/miniapp-packaging/#dfn-auto" data-type="dfn" data-link-type="dfn"><code>"auto"</code></a> (default)</dt>
          <dd>No explicit directionality.</dd>
        </dl>
        <p class="note" title="Processing the `dir` member">
          When [=processing a MiniApp manifest=], the <a href="https://www.w3.org/TR/appmanifest/#dfn-process-the-dir-member" data-link-type="dfn">process the <code>dir</code> member</a> algorithm is used to process the <code>dir</code> member, according to the [[APPMANIFEST]] specification.
        </p>
      </section>
      <section data-cite="IMAGE-RESOURCE HTML">
        <h3>
          <span><code>icons</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>icons</code></dfn> member describes images that serve as iconic representations of MiniApps. This member is an [=array=] of [=image resource=] objects.
        </p>
        <p>As specified in [[IMAGE-RESOURCE]], an [=image resource=] consists of:</p>
        <dl>
        <dt>
          <dt><a href="https://www.w3.org/TR/image-resource/#dfn-label" data-link-type="dfn"><code>label</code></a></dt>
          <dd>
            An optional [=string=] representing the accessible name of the image.
          </dd>
          <dt><a href="https://www.w3.org/TR/image-resource/#dfn-sizes" data-type="dfn" data-link-type="dfn"><code>sizes</code></a></dt>
          <dd>
            An optional [=string=] representing the sizes of the image, expressed using the same syntax as [^link^]'s [^link/sizes^] attribute.
          </dd>
          <dt><a href="https://www.w3.org/TR/image-resource/#dfn-src" data-type="dfn" data-link-type="dfn"><code>src</code></a></dt>
          <dd>A <a data-link-type="dfn" data-type="dfn" href="https://url.spec.whatwg.org/#concept-url">URL</a> from where to obtain the image data.</dd>
        </dl>
        <p class="note" title="Processing the `icons` member">
          When [=processing a MiniApp manifest=], the <a href="https://www.w3.org/TR/appmanifest/#dfn-process-image-resources" data-link-type="dfn">process image resources</a> algorithm is used to process the <code>icons</code> member, according to the [[APPMANIFEST]] specification.
        </p>        
      </section>      
      <section>
        <h3>
          <span><code>lang</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>lang</code></dfn> member, while specifying the primary language of the <a>localizable members</a>, also specifies
          the primary language of the whole MiniApp. This member is a [=string=] in the form of a <a href="https://w3c.github.io/manifest/#dfn-language-tag" data-link-type="dfn">language tag</a>, a string that matches the production of a Language-Tag [[BCP47]], as defined in [[APPMANIFEST]].
        </p>
        <p class="note" title="Processing the `lang` member">
          When [=processing a MiniApp manifest=], the <a href="https://www.w3.org/TR/appmanifest/#dfn-process-the-lang-member" data-link-type="dfn">process the <code>lang</code> member</a> algorithm is used to process the <code>lang</code> member, according to the [[APPMANIFEST]] specification.
        </p>           
      </section>
      <section>
        <h3>
          <span><code>name</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn data-dfn-for="MiniApp manifest"><code>name</code></dfn> member is the descriptive name of the application. This is the name directly displayed to the user. It is used as the display name of MiniApp along with the desktop icon and in the context of MiniApp management. 
        </p>
        <p class="note" title="Processing the `name` member">
          When [=processing a MiniApp manifest=], the <a href="https://w3c.github.io/manifest/#dfn-process-a-text-member" data-link-type="dfn">process a text member</a> algorithm is used to process the <code>name</code> member, according to the [[APPMANIFEST]] specification.
        </p>
      </section>
      <section>
        <h3>
          <span><code>short_name</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>short_name</code></dfn> member provides a concise and easy-to-read name for a MiniApp. It can be used when there is insufficient space to display the full MiniApp name provided in <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a>.
        </p>
        <p class="note" title="Processing the `short_name` member">
          When [=processing a MiniApp manifest=], the <a href="https://w3c.github.io/manifest/#dfn-process-a-text-member" data-link-type="dfn">process a text member</a> algorithm is used to process the <code>short_name</code> member, according to the [[APPMANIFEST]] specification.
        </p>        
      </section>
    </section>

    <section id='webappmanifest-app-info-members' data-cite='MANIFEST-APP-INFO'>
      <h2>Application Information members</h2>
      <p>
        The following member is defined in the Web App Manifest - Application Information specification [[MANIFEST-APP-INFO]].
      </p>
      <section>
        <h3>
          <span><code>description</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>description</code></dfn> member provides a textual description for the MiniApp representing the purpose of the web application in natural language, as defined in [[MANIFEST-APP-INFO]]
        </p>
        <p>
          To <dfn>process the <code>description</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
        </p>
        <ol class="algorithm">
          <li>If the type of |json|["description"] is not [=string=], return.</li>
          <li>Set |manifest|["description"] to |json|["description"].</li>
        </ol>
      </section>
    </section>
      
    <section id='supplementary-manifest-members' data-cite="MINIAPP-PACKAGING">
      <h2>Supplementary members</h2>
      <p>
        The following members are defined under the scope of the [=MiniApp manifest=], addressing specific aspects of MiniApp.
      </p>
      <section>
        <h3>
          <span><code>app_id</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>app_id</code></dfn> member is a [=string=] that identifies the MiniApp univocally. This member is mainly used for package management, and it supports the update and release process of MiniApp versioning.
        </p>
        <p>
          The format of <a><code>app_id</code></a> is RECOMMENDED to be a [=string=] defined by the following rule:
        </p>
        <pre class="abnf">
          appIdRule = name *("." name)
          name = ALPHA [*( ALPHA / DIGIT / "-" ) ( ALPHA / DIGIT)]
        </pre>
        <p class="note" title='Usage'>
              One common practice is to use the reverse-domain-name-like convention (e.g., <code>org.example.miniapp</code>).
        </p>
        <p>
          To <dfn>process the <code>app_id</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
        </p>
        <ol class="algorithm">
          <li>If |json|["app_id"] does not [=map/exist=], or if the type of |json|["app_id"] is not [=string=], return failure.</li>
          <li>Set |manifest|["app_id"] to |json|["app_id"].</li>
        </ol>        
      </section>
      <section>
        <h3>
          <span><code>min_platform_version</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn data-dfn-for="MiniApp manifest"><code>min_platform_version</code></dfn> member is a [=string=] that indicates the minimum supported version of the MiniApp user agent's platform to ensure the regular operation of a MiniApp (e.g., <code>"1.0.0"</code>).
        </p>
        <p class="note" title='Usage'>
          The RECOMMENDED format for this member is <code>"X.Y.Z"</code>, where <code>X</code>, <code>Y</code>, and <code>Z</code> are non-negative integer values (e.g., <samp>"1.10.0"</samp>), as specified in <cite>Semantic Versioning</cite> [[SEMANTIC-VERSIONING]].
        </p>        
        <p>
          To <dfn>process the <code>min_platform_version</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
        </p>
        <ol class="algorithm">
          <li>If |json|["min_platform_version"] does not [=map/exist=], or if the type of |json|["min_platform_version"] is not [=string=], return failure.</li>
          <li>Set |manifest|["min_platform_version"] to |json|["min_platform_version"].</li>
        </ol>         
      </section>
      <section>
        <h3>
          <span><code>pages</code> member</span>
        </h3>
        <p>
            The [=MiniApp manifest's=] <dfn><code>pages</code></dfn> member is an [=array=] of [=relative-url string=] used for specifying the collection of pages that are part of a MiniApp. Each item in the array represents a [=page route=].
        </p> 
        <p>
          A <dfn data-lt="page route|page routes">MiniApp page route</dfn> is the relative path and filename of a MiniApp Page.
        </p> 
        <p>
          During the MiniApp development process, adding or deleting <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-page">MiniApp pages</a> is done by configuring the array. When configuring the [=page routes=], the file name extension MAY be omitted (e.g., <samp>/component/mypage</samp>).
        </p>
        <p>
          The first item in the <a><code>pages</code></a> array defines the homepage of a MiniApp.
        </p>
        <div class="note" title="Usage">
          <p>
            For compatibility with the Web platform, it is RECOMMENDED to use <a><code>pages</code></a> along with the Web application manifest's <a href="https://www.w3.org/TR/appmanifest/#start_url-member" data-link-type="dfn"><code>start_url</code></a> and <a href="https://www.w3.org/TR/appmanifest/#scope-member" data-link-type="dfn"><code>scope</code></a> members. These members will be set with the following values:
          </p>
          <ul>
            <li><a href="https://www.w3.org/TR/appmanifest/#start_url-member" data-link-type="dfn">start_url</a> SHOULD be set with the same value of the first item in the <a><code>pages</code></a> member; and</li>
            <li><a href="https://www.w3.org/TR/appmanifest/#scope-member" data-link-type="dfn">scope</a> SHOULD be set with the value <code>"."</code>.</li>
          </ul>
        </div>
        <p>
          To <dfn>process the <code>pages</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
        </p>
        <ol class="algorithm">
          <li>If |json|["pages"] does not [=map/exist=], or if the type of |json|["pages"] is not [=list=], return failure.</li>
          <li>Let |pages| be a new [=list=].</li>
          <li>[=list/For each=] |item:string| of |json|["pages"]:
            <ol>
              <li>If the type of |item| is not [=string=], return.</li>
              <li>Let |url:URL| be the result of [=URL Parser|parsing=] |item|.</li>
              <li>If |url| is failure, continue.</li>
              <li>[=list/Append=] |pages| to |url|.</li>
            </ol>
          </li>
          <li>Set |manifest|["pages"] to |pages|.</li>
        </ol>        
      </section>      
      <section>
        <h3>
          <span><code>req_permissions</code> member</span>
        </h3>
        <p>
            The optional [=MiniApp manifest's=] <dfn><code>req_permissions</code></dfn> member is an [=array=] of [=MiniApp permission resources=] objects.
        </p> 
        <p> 
          Each <a>MiniApp permission resource</a> declares a request for using a concrete system feature (e.g., access to device's location, user contacts, sensors, and camera) required for the proper execution of the MiniApp.
        </p>
        <p>
          To <dfn>process the <code>req_permissions</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
        </p>
        <ol class="algorithm">
          <li>If |json|["req_permissions"] does not [=map/exist=], or if the type of |json|["req_permissions"] is not [=list=], return.</li>
          <li>Let |permissions:list| be a new [=list=].</li>
          <li>[=list/For each=] |item:object| of |json|["req_permissions"]:
            <ol>
              <li>If the type of |item| is not [=object=], return failure.</li>
              <li>Let |permission| be an [=ordered map=].</li>
              <li><a>Process the permission resource's <code>name</code> member</a> passing |item| and |permission|.</li>
              <li><a>Process the permission resource's <code>reason</code> member</a> passing |item| and |permission|.</li>
              <li>[=list/Append=] |permission| to |permissions|.</li>
            </ol>
          </li>
          <li>Set |manifest|["req_permissions"] to |permissions|.</li>
        </ol>        
        <p class="note" title="Protection of user's privacy">
          User agents will ask for the user's consent to protect their privacy during access to these specific features. This information in the <a><code>req_permissions</code></a> member may be used by app stores or hosting platforms to filter MiniApps according to the user's preferences, privacy policy, or device capabilities. 
        </p>
      </section>      
      <section>
        <h3>
          <span><code>version_code</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>version_code</code></dfn> member is a non-negative integer [=number=] that represents the version of a MiniApp. It is mainly used for enhancing the maintainability and security of MiniApp (e.g., compatibility among incremental versions). The <a><code>version_code</code></a> member aims at supporting the development and deployment process, and it is not usually displayed to the end-user.
        </p>
        <p>
          Value by default: <code>1</code>.
        </p>
        <div class="note" title='Usage'>
          <p>
            The value of this member is usually incremented according to the version iteration process.
          </p>
        </div>
        <p>
          To <dfn>process the <code>version_code</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
        </p>
        <ol class="algorithm">
          <li>If |json|["version_name"] does not [=map/exist=], or if the type of |json|["version_code"] is not [=number=], return failure.</li>
          <li>Let |version:number| be a [=number=], initially 1.</li>
          <li>If |json|["version_code"] is greater than 0, then: <br/>
            Set |version| to |json|["version_code"].</li>
          <li>Set |manifest|["version_code"] to |version|.</li>
        </ol>        
      </section>
      <section>
        <h3>
          <span><code>version_name</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>version_name</code></dfn> member is a [=string=] mainly used for describing information on the version of a MiniApp, playing an essential role in version control, MiniApp application, and platform compatibility. It is usually considered as the version that is shown publicly and displayed to the user.
        </p>
        <p class="note" title='Usage'>
          The RECOMMENDED format for this member is <code>X.Y.Z</code>, where <code>X</code>, <code>Y</code>, and <code>Z</code> are non-negative integer values (e.g., <samp>1.10.0</samp>), as specified in <cite>Semantic Versioning</cite> [[SEMANTIC-VERSIONING]].
        </p>
        <p>
          To <dfn>process the <code>version_name</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
        </p>
        <ol class="algorithm">
          <li>If |json|["version_name"] does not [=map/exist=], or if the type of |json|["version_name"] is not [=string=], return failure.</li>
          <li>Set |manifest|["version_name"] to |json|["version_name"].</li>
        </ol>
      </section>
      <section>
        <h3>
          <span><code>widgets</code> member</span>
        </h3>
        <p>
            The optional [=MiniApp manifest's=] <dfn><code>widgets</code></dfn> member is an [=array=] of [=MiniApp widget resources=] that are a part of a MiniApp.
        </p>
        <p>
            A <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-package">MiniApp Package</a> MAY include <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-page">MiniApp pages</a> and Widgets concurrently.
        </p> 
        <p>
            A widget, as part of a MiniApp, adopt some of the members of the [=MiniApp manifest=], including:
        </p> 
        <ul>
          <li><a><code>dir</code></a>;</li>
          <li><a><code>lang</code></a>;</li>
          <li><a><code>app_id</code></a>;</li>
          <li><a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a>;</li>
          <li><a><code>short_name</code></a>;</li>
          <li><a><code>icons</code></a>;</li>
          <li><a><code>version_name</code></a>; and</li>
          <li><a><code>version_code</code></a></li>
        </ul>
        <p>
          However, a widget also has its exclusive fields as defined in the <a>MiniApp widget resource</a>.
        </p>
        <p>
          To <dfn>process the <code>widgets</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
        </p>
        <ol class="algorithm">
          <li>If |json|["widgets"] does not [=map/exist=], or if the type of |json|["widgets"] is not [=list=], return.</li>
          <li>Let |widgets:list| be a new empty [=list=].</li>
          <li>[=list/For each=] |item:object| of |json|["widgets"]:
            <ol>
              <li>If the type of |item| is not [=object=], return failure.</li>
              <li>Let |widget| be an [=ordered map=].</li>
              <li><a>Process the widget's <code>name</code> member</a> passing |item| and |widget|.</li>
              <li><a>Process the widget's <code>path</code> member</a> passing |item| and |widget|.</li>
              <li><a>Process the widget's <code>min_platform_version</code> member</a> passing |item|, |manifest|, and |widget|.</li>
              <li>If |widget|["name"] does not [=map/exist=], or if |item|["path"] does not [=map/exist=], return failure.</li>              
              <li>[=list/Append=] |widget| to |widgets|.</li>
            </ol>
          </li>
          <li>Set |manifest|["widgets"] to |widgets|.</li>
        </ol>        
      </section>      
      <section>
        <h3>
          <span><code>window</code> member</span>
        </h3>
        <p>
          The optional [=MiniApp manifest's=] <dfn><code>window</code></dfn> member contains a <a>MiniApp window resource</a> [=object=] to describe the look and feel of the MiniApp frame, including the styles of the status bar, navigation bar, title, background colors, among other visual configuration elements.
        </p>
        <p>
            The <a><code>window</code></a> object members inherit the text direction and language configuration from the <a><code>dir</code></a> and <a><code>lang</code></a> members at the root of the [=MiniApp manifest=].
        </p>
        <p>
          To <dfn>process the <code>window</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
        </p>
        <ol class="algorithm">
          <li>If |json|["window"] does not [=map/exist=], or if the type of |json|["window"] is not [=object=], return.</li>
          <li>Let |window:ordered map| be a new [=ordered map=] «[ "auto_design_width" → false, "background_color" → "#ffffff", "background_text_style" → "dark", "design_width" → 750, "enable_pull_down_refresh" → false, "fullscreen" → "false", "navigation_bar_background_color" → "#000000", "navigation_bar_text_style" → "white", "navigation_bar_title_text" → "default", "on_reach_bottom_distance" → 50, "orientation" → "portrait" ]».</li>
          <li><a>Process the window's <code>auto_design_width</code> member</a> passing |json|["window"] and |window|.</li>
          <li><a href="https://w3c.github.io/manifest/#dfn-process-a-color-member" data-link-type="dfn">Process a color member</a> passing |json|["window"], |window| and "background_color".</li>
          <li><a>Process the window's <code>design_width</code> member</a> passing |json|["window"] and |window|.</li>
          <li><a>Process the window's <code>enable_pull_down_refresh</code> member</a> passing |json|["window"] and |window|.</li>
          <li><a>Process the window's <code>fullscreen</code> member</a> passing |json|["window"] and |window|.</li>
          <li><a href="https://w3c.github.io/manifest/#dfn-process-a-color-member" data-link-type="dfn">Process a color member</a> passing |json|["window"], |window| and "navigation_bar_background_color".</li>
          <li><a>Process the window's <code>navigation_bar_text_style</code> member</a> passing |json|["window"] and |window|.</li>
          <li><a>Process the window's <code>navigation_bar_title_text</code> member</a> passing |json|["window"] and |window|.</li>
          <li><a>Process the window's <code>on_reach_bottom_distance</code> member</a> passing |json|["window"] and |window|.</li>
          <li><a>Process the window's <code>orientation</code> member</a> passing |json|["window"] and |window|.</li>
          <li><a>Process the window's <code>auto_design_width</code> member</a> passing |json|["window"] and |window|.</li>
          <li>Set |manifest|["window"] to |window|.</li>
        </ol>             
      </section>
    </section>
    <section id="processing" data-cite="APPMANIFEST">
      <h3>Processing the manifest</h3>
      <p>
        The MiniApp manifest, as an extension of the [=Application manifest=], provides a supplementary algorithm to be processed at the <a href="https://www.w3.org/TR/appmanifest/#dfn-extension-point">extension point</a> of the <a href="https://www.w3.org/TR/appmanifest/#dfn-processing-a-manifest" data-link-type="dfn">processing a manifest</a> algorithm defined in [[APPMANIFEST]].
      </p>
      <p>
        To <dfn data-lt="processing a MiniApp manifest">process a MiniApp manifest</dfn>, given [=object=] |json:JSON| and [=ordered map=] |manifest:ordered map|:
      </p>
      <ol class="algorithm">
        <li><a>Process the <code>app_id</code> member</a> passing |json| and |manifest|.</li>
        <li><a>Process the <code>description</code> member</a> passing |json| and |manifest|.</li>
        <li><a>Process the <code>min_platform_version</code> member</a> passing |json| and |manifest|.</li>
        <li><a>Process the <code>pages</code> member</a> passing |json| and |manifest|.</li>
        <li><a>Process the <code>req_permissions</code> member</a> passing |json| and |manifest|.</li>
        <li><a>Process the <code>version_code</code> member</a> passing |json| and |manifest|.</li>
        <li><a>Process the <code>version_name</code> member</a> passing |json| and |manifest|.</li>
        <li><a>Process the <code>widgets</code> member</a> passing |json| and |manifest|.</li>
        <li><a>Process the <code>window</code> member</a> passing |json| and |manifest|.</li>
      </ol>      
    </section>
  </section>

  <section id="sec-permission-resources">
    <h2>MiniApp permission resources</h2>
    <p>
      A <dfn data-lt="permission resource|MiniApp permission resources|MiniApp permission resource's">MiniApp permission resource</dfn> is an [=object=] that describes a request for using a concrete system feature (e.g., access to device's location, user contacts, sensors, and camera) required for the proper execution of a MiniApp.
    </p>
    <p>
      The following members are defined under the scope of the [=MiniApp manifest=], addressing specific aspects of a [=permission resource=].
    </p>
    <section>
      <h3><code>name</code> member</h3>
      <p>
        The [=MiniApp permission resource's=] <dfn data-dfn-for="MiniApp permission resource"><code>name</code></dfn> member is a [=string=] that indicates the name of the feature requested.
      </p>
      <p>
        To <dfn>process the permission resource's <code>name</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |permission:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["name"] does not [=map/exist=], or<br/> 
            if the type of |json|["name"] is not [=string=], or if |json|["name"] is the empty string, return failure.</li>
        <li>Set |permission|["name"] to |json|["name"].</li>
      </ol>          
    </section>
    <section>
      <h3><code>reason</code> member</h3>
      <p>
        The optional [=MiniApp permission resource's=] <dfn><code>reason</code></dfn> member is a [=string=] that indicates the reason given to request the feature specified in the <a data-link-type="dfn" data-link-for="MiniApp permission resource"><code>name</code></a> attribute.
      </p>
      <p>
        To <dfn>process the permission resource's <code>reason</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |permission:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["reason"] does not [=map/exist=], or<br/> 
          if the type of |json|["reason"] is not [=string=], or if |json|["reason"] is the empty string, return.</li>
        <li>Set |permission|["reason"] to |json|["reason"].</li>
      </ol>           
    </section>
  </section>

  <section id="sec-widget-resource-members">
    <h2>MiniApp widget resource members</h2>
    <p>
      A <dfn data-lt="widget resources|MiniApp widget resources|MiniApp widget resource's">MiniApp widget resource</dfn> is an [=object=] that defines and configures a <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-widget">widget</a> that is part of a MiniApp.
    </p>
    <p>
      The following members are defined under the scope of the [=MiniApp manifest=], addressing specific aspects of a [=widget resource=].
    </p>      
    <section>
      <h2><code>name</code> member</h2>
      <p>
        The [=MiniApp widget resource's=] <dfn data-dfn-for="MiniApp widget resource"><code>name</code></dfn> member is a [=string=] that indicates the title of a widget.
      </p>
      <p>
        To <dfn>process the widget's <code>name</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |widget:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["name"] does not [=map/exist=], or if the type of |json|["name"] is not [=string=], return failure.</li>
        <li>Set |widget|["name"] to |json|["name"].</li>
      </ol>      
    </section>
    <section>
      <h3><code>path</code> member</h3>
      <p>
        The [=MiniApp widget resource's=] <dfn>path</dfn> member is a [=relative-url string=] that defines the corresponding  [=page route=] of a widget, represented as in the <a><code>pages</code></a> array.
      </p>
      <p>
        To <dfn>process the widget's <code>path</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |widget:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["path"] does not [=map/exist=], or if the type of |json|["path"] is not [=string=], return failure.</li>
        <li>Let |url:URL| be the result of [=URL Parser|parsing=] |json|["path"].</li>
        <li>If |url| is failure, return failure.</li>
        <li>Set |widget|["path"] to |url|.</li>
      </ol>
    </section>
    <section>
      <h3><code>min_platform_version</code> member</h3>
      <p>
        The optional [=MiniApp widget resource's=] <dfn data-dfn-for="MiniApp widget resource"><code>min_platform_version</code></dfn> member is a [=string=] that indicates the minimum platform version supported for a <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-widget">MiniApp widget</a>.
      </p>
      <p class="note" title='Usage'>
        Since Widget APIs and MiniApp APIs may differ, the declaration of the minimum version of the platform may be different. Thus, if the widgets member omits <a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>min_platform_version</code></a> explicitly, the user agent will consider the same requirement as the specified in the <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>min_platform_version</code></a> member at the root of the [=manifest=].
        </p>
      </p>
      <p>
        To <dfn>process the widget's <code>min_platform_version</code> member</dfn>, given [=object=] |json:JSON|, [=ordered map=] |widget:ordered map| and [=ordered map=] |manifest:ordered map|:
      </p>
      <ol class="algorithm">
        <li>Set |widget|["min_platform_version"] to |manifest|["min_platform_version"].</li>        
        <li>If |json|["min_platform_version"] does not [=map/exist=], or if the type of |json|["min_platform_version"] is not [=string=], return.</li>
        <li>Set |widget|["min_platform_version"] to |json|["min_platform_version"].</li>
      </ol>      
    </section>
  </section>

  <section id="sec-window-resource-members">
    <h2>MiniApp window resource members</h2>
    <p>
      A <dfn data-lt="window resource|MiniApp window resources|MiniApp window resource's">MiniApp window resource</dfn> is an [=object=] that defines and configures the window that contains a MiniApp.
    </p>
    <p>
      The following members are defined under the scope of the [=MiniApp manifest=], enabling the description of the MiniApp [=window resource=].
    </p>
    <section>
      <h3><code>auto_design_width</code> member</h3>
      <p>
        The <dfn><code>auto_design_width</code></dfn> member is a [=boolean=] that indicates whether the <a><code>design_width</code></a> of the page is auto-calculated by the user agent. When <a><code>auto_design_width</code></a> is <code>true</code>, the value of <a><code>design_width</code></a> is ignored. In this case, the system's baseline width is automatically determined according to the pixel density of the screen.
      </p>
      <p>
        Value by default: <code>false</code>.
      </p>
      <p>
        To <dfn>process the window's <code>auto_design_width</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["auto_design_width"] does not [=map/exist=], or if the type of |json|["auto_design_width"] is not [=boolean=], return.</li>
        <li>Set |window|["auto_design_width"] to |json|["auto_design_width"].</li>
      </ol>       
    </section>
    <section data-cite="CSS-COLOR-4 CSS-SYNTAX-3 APPMANIFEST">
      <h3><code>background_color</code> member</h3>
      <p>
        The <dfn data-dfn-for="MiniApp window resource"><code>background_color</code></dfn> member is a [=string=] that specifies the background color of the window that contains a MiniApp.
      </p>
      <p>
        This member supports [=sRGB=] colors, and it is equivalent to the application manifest's <a href="https://www.w3.org/TR/appmanifest/#dfn-background_color" data-link-type="dfn"><code>background_color</code></a>.
      </p>
      <p>
        Value by default: <code>"#ffffff"</code>.
      </p>
      <p class="note" title="Processing the `background_color` member">
        When [=processing a MiniApp manifest=], the <a href="https://w3c.github.io/manifest/#dfn-process-a-color-member" data-link-type="dfn">process a color member</a> algorithm is used to process the window's <code>background_color</code> member, according to the [[APPMANIFEST]] specification.
      </p>      
    </section>
    <section data-cite="CSS-COLOR-4 MEDIAQUERIES-5">
      <h3><code>background_text_style</code> member</h3>
      <p>
        <span>The <dfn><code>background_text_style</code></dfn> member is a [=string=] that specifies the background text style, indicating a light or dark color theme.</span>
      </p>
      <p>
        This member supports the values of <a data-xref-type="css-descriptor" data-xref-for="@media">prefers-color-scheme</a> and MUST contain one of the following <dfn>background text style values</dfn>:  
      </p>
      <dl>
        <dt><dfn><code>"light"</code></dfn></dt>
        <dd>For light style.</dd>
        <dt><dfn><code>"dark"</code></dfn> (default)</dt>
        <dd>For dark style.</dd>
      </dl>      
      <p>
        To <dfn>process the window's <code>background_text_style</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["background_text_style"] does not [=map/exist=], or<br/> 
          if the type of |json|["background_text_style"] is not [=string=], or<br/>
          if |json|["background_text_style"] doesn't match one of the [=background text style values=], return.</li>
        <li>Set |window|["background_text_style"] to |json|["background_text_style"].</li>
      </ol>
    </section>
    <section>
      <h3><code>design_width</code> member</h3>
      <p>
        The <dfn><code>design_width</code></dfn> member is a [=number=] that indicates the baseline width of the page design in <a data-cite="css-values">pixel unit</a>. It is  used for visually adjusting the page components.
      </p>
      <p>
        The value is a non-negative integer and the value by default is <code>750</code>.
      </p>
      <p>
        To <dfn>process the window's <code>design_width</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["design_width"] does not [=map/exist=], or<br/>
          if the type of |json|["design_width"] is not [=number=], or if the type of |json|["design_width"] is less than 0, return.</li>
        <li>Set |window|["design_width"] to |json|["design_width"].</li>
      </ol>
    </section>
    <section>
      <h3><code>enable_pull_down_refresh</code> member</h3>
      <p>
        The <dfn><code>enable_pull_down_refresh</code></dfn> member is a [=boolean=] that specifies if the <code>pull-to-refresh</code> event is enabled during the interaction with the MiniApp.
      </p>
      <p>
        Value by default: <code>false</code>.
      </p>
      <p>
        To <dfn>process the window's <code>enable_pull_down_refresh</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["enable_pull_down_refresh"] does not [=map/exist=], <br/>
          or if the type of |json|["enable_pull_down_refresh"] is not [=boolean=], return.</li>
        <li>Set |window|["enable_pull_down_refresh"] to |json|["enable_pull_down_refresh"].</li>
      </ol>      
    </section>    
    <section>
      <h3><code>fullscreen</code> member</h3>
      <p>
        The <dfn><code>fullscreen</code></dfn> member is a [=boolean=] that indicates if the MiniApp is shown in full-screen display mode.
      </p>
      <p class="note" title='Usage'>
        When this member takes the <code>true</code> value, it is equivalent to the <a href="https://www.w3.org/TR/appmanifest/#dfn-fullscreen" data-link-type="dfn"><code>fullscreen</code> value on the application manifest's <a href="https://www.w3.org/TR/appmanifest/#dfn-display" data-link-type="dfn"><code>display</code></a> member. When it takes <code>false</code> as value, it is equivalent to <a href="https://www.w3.org/TR/appmanifest/#dfn-minimal-ui" data-link-type="dfn"><code>minimal-ui</code></a>.
      </p>
      <p>
        Value by default: <code>false</code>.
      </p>
      <p>
        To <dfn>process the window's <code>fullscreen</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["fullscreen"] does not [=map/exist=], <br/>
            or if the type of |json|["fullscreen"] is not [=boolean=], return.</li>
        <li>Set |window|["fullscreen"] to |json|["fullscreen"].</li>
      </ol>
    </section>
    <section data-cite="CSS-COLOR-4 CSS-SYNTAX-3">
      <h3><code>navigation_bar_background_color</code> member</h3>
      <p>
        <span>The <dfn><code>navigation_bar_background_color</code></dfn> member is a [=string=] that specifies the color of the background of the navigation bar of the MiniApp.</span>
      </p>
      <p>This member supports [=sRGB=] colors.</p>
      <p>Value by default: <code>"#000000"</code>.</p>
      <p>This member is processed according to the  specified in [[APPMANIFEST]].</p>
      <p class="note" title="Processing the `navigation_bar_background_color` member">
        When [=processing a MiniApp manifest=], the <a href="https://w3c.github.io/manifest/#dfn-process-a-color-member" data-link-type="dfn">process a color member</a> algorithm is used to process the window's <code>navigation_bar_background_color</code> member, according to the [[APPMANIFEST]] specification.
      </p>
    </section>
    <section>
      <h3><code>navigation_bar_text_style</code> member</h3>
      <p>
        <span>The <dfn><code>navigation_bar_text_style</code></dfn> member is a [=string=] that indicates the text color of the navigation bar title.</span>
      </p>
      <p>
        This member MUST contain one of the following <dfn>text style values</dfn>:  
      </p>
      <dl>
        <dt><dfn><code>"white"</code></dfn> (default)</dt>
        <dd>For white text color.</dd>
        <dt><dfn><code>"black"</code></dfn></dt>
        <dd>For black text color.</dd>
      </dl>
      <p>
        To <dfn>process the window's <code>navigation_bar_text_style</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["navigation_bar_text_style"] does not [=map/exist=], or<br/> 
         if the type of |json|["navigation_bar_text_style"] is not [=string=], or<br/> 
         if |json|["navigation_bar_text_style"] doesn't match one of the [=text style values=], return.</li>
        <li>Set |window|["navigation_bar_text_style"] to |json|["navigation_bar_text_style"].</li>
      </ol>      
    </section>
    <section>
      <h3><code>navigation_bar_title_text</code> member</h3>
      <p>
        The <dfn><code>navigation_bar_title_text</code></dfn> member is a [=string=] that specifies the title of the navigation bar of the MiniApp.
      </p>
      <p>
        To <dfn>process the window's <code>navigation_bar_title_text</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["navigation_bar_title_text"] does not [=map/exist=], or<br/> 
         if the type of |json|["navigation_bar_title_text"] is not [=string=], return.</li>
        <li>Set |window|["navigation_bar_title_text"] to |json|["navigation_bar_title_text"].</li>
      </ol>      
    </section>
    <section>
      <h3><code>navigation_style</code> member</h3>
      <p>
        The <dfn><code>navigation_style</code></dfn> member is a [=string=] that specifies the style of the navigation bar.
      </p>
      <p>
        This member MUST contain one of the following <dfn>navigation style values</dfn>: 
      </p>
      <dl>
        <dt><dfn><code>"default"</code></dfn> (default)</dt>
        <dd>For applying the style by default.</dd>
        <dt><dfn><code>"custom"</code></dfn></dt>
        <dd>For applying a customized navigation bar.</dd>
      </dl>
      <p>
        To <dfn>process the window's <code>navigation_style</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["navigation_style"] does not [=map/exist=], or<br/> 
            if the type of |json|["navigation_style"] is not [=string=], or<br/>
            if |json|["navigation_style"] doesn't match one of the [=navigation style values=], return.</li>
        <li>Set |window|["navigation_style"] to |json|["navigation_style"].</li>
      </ol>
      <p class="note" title='Usage'>
        The capsule button at the right corner is not customizable.
      </p>      
    </section>
    <section>
      <h3><code>on_reach_bottom_distance</code> member</h3>
      <p>
        The <dfn><code>on_reach_bottom_distance</code></dfn> member is a [=number=] that defines the vertical offset from the bottom of the window required to trigger a page pull-up event. Values for this member are non-negative integers expressed in <a data-cite="css-values">pixel unit</a>.
      </p>
      <p>
        Value by default: <code>50</code>.
      </p>
      <p>
        To <dfn>process the window's <code>on_reach_bottom_distance</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["on_reach_bottom_distance"] does not [=map/exist=], or<br/> 
          if the type of |json|["on_reach_bottom_distance"] is not [=number=], or <br/>
          if if the type of |json|["on_reach_bottom_distance"] is less than 0, return.</li>
        <li>Set |window|["on_reach_bottom_distance"] to |json|["on_reach_bottom_distance"].</li>
      </ol>      
    </section>
    <section>
      <h3><code>orientation</code> member</h3>
      <p>
        The <dfn><code>orientation</code></dfn> member is a [=string=] that specifies the configuration of the screen orientation for the MiniApp. 
      </p>
      <p>
        This member supports the <dfn>orientation values</dfn>: <code>"portrait"</code> and <code>"landscape"</code> defined in {{OrientationLockType}} [[SCREEN-ORIENTATION]].
      </P>
      <p class="note" title='Usage'>
        This member is equivalent to the application manifest's <a href="https://www.w3.org/TR/appmanifest/#dfn-orientation" data-link-type="dfn"><code>orientation</code></a>.
      </p>
      <p>
        Value by default: <code>"portrait"</code>.
      </p>
      <p>
        To <dfn>process the window's <code>orientation</code> member</dfn>, given [=object=] |json:JSON| and [=ordered map=] |window:ordered map|:
      </p>
      <ol class="algorithm">
        <li>If |json|["orientation"] does not [=map/exist=], or<br/>
            if the type of |json|["orientation"] is not [=string=], or<br/>
            if |json|["orientation"] doesn't match one of the [=orientation values=], return.</li>
        <li>Set |window|["orientation"] to |json|["orientation"].</li>
      </ol>
      <div class="issue" data-number="8"></div>
    </section>
  </section>

  <section id="sec-localizable-members">
    <h2>Localizable members</h2>
    <p>
        A <dfn data-lt="localizable members">localizable member</dfn> is a [=manifest=] member whose content may be adapted to specific linguistic, geographical, and cultural aspects. These localizable members share the <a href="https://w3c.github.io/manifest/#dfn-language-tag" data-link-type="dfn">language tag</a> (<a><code>lang</code></a>) and display direction (<a><code>dir</code></a>) defined at manifest's root.
    </p>
    <p>
      The following members are [=localizable members=]:
    </p>
    <ul>
        <li><a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a></li>
        <li><a><code>short_name</code></a></li>
        <li><a><code>description</code></a></li>
        <li>[=MiniApp window resource's=] <a><code>navigation_bar_title_text</code></a></li>
        <li>[=MiniApp widget resource's=] <a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>name</code></a></li>
    </ul>
  </section>

  <section>
    <h2>Dependencies</h2>
    <p>
      As a crucial part of a <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-package">MiniApp Package</a>, the <code>manifest.json</code> file describes several important aspects of the MiniApp by referring to the <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-package">MiniApp Package</a> resources in different file types, such as the page scripts and visual configuration files in the <code>pages</code> directory and the images in the <code>common</code> directory. Details are specified in [[MINIAPP-PACKAGING]].
    </p>
    <p>
      The regular operation of a MiniApp relies on the proper configuration in the [=manifest=] and the <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-package">MiniApp Package</a> availability of resources. Such dependency needs to be checked during both the development phase and deployment phase.
    </p>
  </section>

  <section>
    <h2>Security and Privacy Considerations</h2>
    <section>
        <h2>Content constraint</h2>
        <p>
            As the manifest is a JSON document and will commonly be encoded using [[UNICODE]], the security considerations described in [[JSON] and [[UNICODE-SECURITY]] apply. In order to prevent developers from including custom/unrestrained data in a manifest, implementors may use a more strict schema than that defined in <a href="#sec-json-schema">JSON Schema</a> to impose their implementation-specific limits on the member names, types, and value ranges (e.g., to guard against memory overflow, or to meet platform-specific limitations).
        </p>
    </section>

    <section>
        <h2>Local resource access</h2>
        <p>
          Members like <a><code>icons</code></a>, <a><code>pages</code></a>, and <a><code>widgets</code></a> contain paths referring to local resources on the hosting platform. Implementors and the hosting platform should check the validity of those paths to prevent illegal access out of the scope of the <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-package">MiniApp Package</a>. On the other hand, the MiniApp itself (e.g., using scripting code) may provide mechanisms to access external resources either on the hosting platform or on remote websites (e.g., through a URI). In this case, the hosting platform is responsible for providing a clear indication to an end-user about such a context switch.
        </p>
	      <p>
         Additionally, the <a><code>req_permissions</code></a> member provides a specific means to control the access the local software, hardware, and data resources on the user's device. User's consent should be asked when it comes to privacy-related or high-level privileged resources.
        </p>
    </section>

    <section>
        <h2>Integrity</h2>
        <p> The integrity of the manifest document is protected by a cryptographic hash mechanism as part of the whole <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-package">MiniApp Package</a>, as detailed in [[MINIAPP-PACKAGING]]. </p>
    </section>

    <section>
        <h2>Transparency</h2>
        <p>
          The user agent SHOULD provide the end-user with transparent metadata about a MiniApp (i.e., <a><code>app_id</code></a>, <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a>, <a><code>short_name</code></a>, <a>icons</a>, <a><code>version_name</code></a>, <a><code>description</code></a>), offering users enough information, allowing them to make a conscious decision about its usage. This practice could also help to identify spoofing MiniApps.
        </p>
    </section>
  </section>

  <section class="appendix" id="conformance">
    <p>
      This specification uses the Augmented Backus-Naur Form (ABNF) as defined in [[!RFC5234]].
    </p>
    <p>
        The MiniApp Manifest specification depends on the Infra Standard [[INFRA]] to describe algorithms.
    </p>      
  </section>

  <section class="appendix" id="sec-json-schema">
      <h2>
          <span>JSON Schema</span>
      </h2>
      <p>
        Developers interested in validating the MiniApp manifest document can use the JSON Schema defined at <a href="https://w3c.github.io/miniapp-manifest/manifest_schema.json">https://w3c.github.io/miniapp-manifest/manifest_schema.json</a>.
      </p>
      <aside class="note" title="MiniApp Manifest JSON Schema">
        <details>
          <summary>
            Click to load the schema.
          </summary>
          <pre class="json" data-include= "https://w3c.github.io/miniapp-manifest/manifest_schema.json"></pre>
        </details>
      </aside>
  </section>

  <section class="appendix informative">
    <h2>Acknowledgements</h2>
    <div class="ednote">
      To include contributors here!
    </div>
  </section>

  <section class="appendix informative">
    <h2>
      <span>Extensibility</span>
    </h2>
    <p>
      This specification is based on the [=application manifest=] <a href="https://www.w3.org/TR/appmanifest/#extensibility">extensibility principle</a>. 
    </p>
    <p>
      Although proprietary extensions are undesirable, they may be included as a manifest extension. In this case, it is RECOMMENDED to use vendor prefixes for the new members.
    </p>
    <p>
      We encourage implementors to add proprietary extensions to the Extensions Registry. This allows the community to track what extensions vendors and/or the web community have defined and documented.
    </p>
    <p class="issue" data-number="9">
    </p>
    <p>
      The following is an example of three hypothetical vendor extensions.
    </p>
    <pre class="example json" title="Proprietary extensions">
      {
        ...
        "wechat_new_feature": "foo",
        "ali_new_url_system": "http://example.org",
        "coolminiapp_menu_color": "#FA0000"
        ...
      }
    </pre>
  </section>
</body>
</html>
